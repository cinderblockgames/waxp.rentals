@page
@model IndexModel

<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
  <title>Rent WAX for BAN :: waxp.rentals</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <!--
  Circle Template
  http://www.templatemo.com/tm-410-circle
  -->
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/normalize.min.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/animate.css">
  <link rel="stylesheet" href="css/templatemo_misc.css">
  <link rel="stylesheet" href="css/templatemo_style.css">
  <link rel="stylesheet" href="css/site.css">

  <link rel="icon" type="image/svg+xml" href="images/favicon/favicon.svg">
  <link rel="icon" type="image/png" href="images/favicon/favicon.png">

  <script src="js/vendor/modernizr-2.6.2.min.js"></script>
  <!-- templatemo 410 circle -->
</head>
<body>
  <!--[if lt IE 7]>
  <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
  <![endif]-->


  <div class="bg-overlay"></div>

  <div class="container-fluid">
    <div class="row">

      <div class="col-md-4 col-sm-12">
        <div class="sidebar-menu">

          <div class="logo-wrapper">
            <h1 class="logo">
              <a href="/">
                <img src="images/crypto/ban_1waxf5j83w7eqqz3kph7u843wh3p5ddf1n48rh4i9m41zhk9nnquzwbnz9pb.svg" alt="monKey" height=70>
                <span>waxp.rentals</span>
              </a>
            </h1>
          </div> <!-- /.logo-wrapper -->

          <div class="menu-wrapper">
            <ul class="menu">
              <li><a class="show-0" href="/">Rent WAX</a></li>
              <li><a class="show-1" href="#">Sell WAX</a></li>
              <li><a class="show-2" href="#">Get Banano</a></li>
              <li><a class="show-3" href="#">My Rentals</a></li>
              <li><a class="show-4" href="#">Recent Transactions</a></li>
            </ul> <!-- /.menu -->
            <a href="#" class="toggle-menu"><i class="fa fa-bars"></i></a>
          </div> <!-- /.menu-wrapper -->
          <!--Arrow Navigation-->
          <a id="prevslide" class="load-item"><i class="fa fa-angle-left"></i></a>
          <a id="nextslide" class="load-item"><i class="fa fa-angle-right"></i></a>

        </div> <!-- /.sidebar-menu -->
      </div> <!-- /.col-md-4 -->

      <div class="col-md-8 col-sm-12">

        <div id="menu-container">

          <div id="menu-0" class="content">
            <div class="row">

              <div class="col-md-12">
                <div class="toggle-content text-center spacing">
                  <h3>Rent WAX</h3>
                  <p>
                    <strong>Stake CPU and NET to your WAX account for {{ state.waxRentPriceInBanano }} BAN per WAX per day.</strong>
                    <br><br>Currently staked: <strong>{{ state.waxBalanceStaked }}</strong> WAX | Available: <strong>{{ state.waxBalanceAvailable }}</strong> WAX
                    <br>Available tomorrow: <strong>{{ state.waxBalanceUnstaking }}</strong> WAX
                  </p>
                </div>
              </div> <!-- /.col-md-12 -->

              <div class="col-md-12">
                <div class="contact-form">
                  <div class="row">
                    <form action="" method="post">
                      <fieldset class="col-md-3">
                        <input type="text" name="account" id="account" minlength="1" maxlength="12" pattern="@WaxRentals.Waxp.Config.Constants.Protocol.WaxAddressRegex" placeholder="WAX Account" required>
                      </fieldset>
                      <fieldset class="col-md-3">
                        <input type="number" name="cpu" id="cpu" min="0" :max="state.waxMaximumRent" step="1" placeholder="# CPU">
                      </fieldset>
                      <fieldset class="col-md-3">
                        <input type="number" name="net" id="net" min="0" :max="state.waxMaximumRent" step="1" placeholder="# NET">
                      </fieldset>
                      <fieldset class="col-md-3">
                        <input type="number" name="days" id="days" min="1" step="1" placeholder="# Days" required>
                      </fieldset>
                      <fieldset class="col-md-12">
                        <input class="button" type="submit" name="open" id="open" value="Start Staking">
                      </fieldset>
                    </form>
                  </div> <!-- /.row -->
                </div> <!-- /.contact-form -->
              </div> <!-- /.col-md-12 -->
            </div> <!-- /.row -->
          </div> <!-- /.content-->

          <div id="menu-1" class="content">
            <div class="row">

              <div class="col-md-12 col-sm-12">
                <div class="toggle-content text-center" id="tab1">
                  <h3>Sell WAX</h3>
                  <p>
                    <span v-if="state.waxMaximumBuy >= state.waxMinimumBuy">
                      <img src="/qr/wax" />
                      <br><br>Want to sell your WAX for BAN?  Send between <strong>{{ state.waxMinimumBuy }}</strong> and <strong>{{ state.waxMaximumBuy }}</strong> WAX to <strong>@WaxRentals.Waxp.Config.Constants.Protocol.Account</strong> <i class="fa fa-copy clipboard" data-copy="@WaxRentals.Waxp.Config.Constants.Protocol.Account"></i> and <strong>include your BAN address as the memo</strong>.
                    </span>
                    <span v-else><strong>Looks like we are out of BAN right now.  Check back again soon!</strong></span>
                    <br><br>WAX price: <strong>${{ state.waxPrice }}</strong> | BAN price: <strong>${{ state.bananoPrice }}</strong>
                    <br>Currently paying <strong>{{ state.waxBuyPriceInBanano }} BAN</strong> per WAX
                    <br>Balance: <strong>{{ state.bananoBalance }} BAN</strong>
                  </p>
                </div>
              </div> <!-- /.col-md-12 -->

            </div> <!-- /.row -->
          </div> <!-- /.content -->

          <div id="menu-2" class="content">
            <div class="row">

              <div class="col-md-4 col-ms-6">
                <div class="g-item">
                  <img src="images/coins/wax.png" alt="WAX">
                  <a class="overlay buy-wax" href="#">
                    <span>WAX</span>
                  </a>
                </div> <!-- /.g-item -->
              </div> <!-- /.col-md-4 -->
              <div class="col-md-4 col-ms-6">
                <div class="g-item">
                  <img src="images/coins/xno.png" alt="XNO">
                  <a rel="nofollow" class="overlay" href="https://banano.nano.trade/" target="_blank">
                    <span>XNO</span>
                  </a>
                </div> <!-- /.g-item -->
              </div> <!-- /.col-md-4 -->
              <div class="col-md-4 col-ms-6">
                <div class="g-item">
                  <img src="images/coins/moon.png" alt="MOON">
                  <a rel="nofollow" class="overlay" href="https://moon.banano.trade/" target="_blank">
                    <span>MOON</span>
                  </a>
                </div> <!-- /.g-item -->
              </div> <!-- /.col-md-4 -->
              <div class="col-md-4 col-ms-6">
                <div class="g-item">
                  <img src="images/coins/usd.png" alt="USD">
                  <a rel="nofollow" class="overlay" href="https://ban.app/" target="_blank">
                    <span>USD</span>
                  </a>
                </div> <!-- /.g-item -->
              </div> <!-- /.col-md-4 -->
              <div class="col-md-4 col-ms-6">
                <div class="g-item">
                  <img src="images/coins/euro.png" alt="EURO">
                  <a rel="nofollow" class="overlay" href="https://ban.app/" target="_blank">
                    <span>EUR</span>
                  </a>
                </div> <!-- /.g-item -->
              </div> <!-- /.col-md-4 -->

            </div> <!-- /.row -->
          </div> <!-- /.content -->

          <div id="menu-3" class="content">
            <div class="row">
              <div class="col-md-6 col-sm-6 mobile-show" style="display: none;" v-if="detail">
                <div class="toggle-content text-center">
                  <h3>Pending Rental Details</h3>
                  <p>
                    
                  </p>
                </div>
              </div>

              <div class="col-md-6 col-sm-6">
                <div class="toggle-content text-center">
                  <h3>Pending Rentals</h3>
                  <p>

                  </p>
                </div>
              </div>

              <div class="col-md-6 col-sm-6 mobile-hide" v-if="detail">
                <div class="toggle-content text-center">
                  <h3>Pending Rental Details</h3>
                  <p>
                    <a :href="detail.link">
                      <img :src="'/qr/banano/' + detail.address.full" />
                      <br>Tap to open Kalium
                    </a>
                    <br><br>Send <strong>exactly {{ detail.banano }} BAN</strong> to
                    <br><span class="banano-address"><span class="address-highlight">{{ detail.address.start }}</span>{{ detail.address.mid }}<span class="address-highlight">{{ detail.address.end }}</span></span>  <i class="fa fa-copy clipboard" :data-copy="detail.address.full"></i>.
                    <br><br>CPU: {{ detail.cpu }} | NET: {{ detail.net }} | Duration: {{ detail.days }} days
                  </p>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 col-sm-6">
                <div class="toggle-content text-center">
                  <h3>Active Rentals</h3>
                  <p>

                  </p>
                </div>
              </div>

              <div class="col-md-6 col-sm-6">
                <div class="toggle-content text-center">
                  <h3>Expired Rentals</h3>
                  <p>

                  </p>
                </div>
              </div>
            </div>
          </div> <!-- /.content -->

          <div id="menu-4" class="content">
            <div class="row">

              <div class="col-md-6">
                <div class="toggle-content text-center spacing">
                  <h3>Recent Wax Rentals</h3>
                  <table class="table table-dark table-striped table-sm">
                    <thead>
                      <tr>
                        <th scope="col" class="text-right">Staked</th>
                        <th scope="col" class="text-right">Duration</th>
                        <th scope="col" class="text-right">Cost</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="rental in recent.rentals">
                        <td class="text-right">
                          {{ rental.cpu + rental.net }} WAX
                          <i class="fa fa-external-link wax-transaction-link" :data-hash="rental.stakeTransaction"></i>
                        </td>
                        <td class="text-right">
                          {{ rental.days }} days
                        </td>
                        <td class="text-right">
                          {{ rental.banano }} BAN
                          <i class="fa fa-external-link banano-address-link" :data-address="rental.bananoAddress"></i>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div> <!-- /.col-md-6 -->

              <div class="col-md-6">
                <div class="toggle-content text-center spacing">
                  <h3>Recent Wax Purchases</h3>
                  <table class="table table-dark table-striped table-sm">
                    <thead>
                      <tr>
                        <th scope="col" class="text-right">Received</th>
                        <th scope="col" class="text-right">Paid</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="purchase in recent.purchases">
                        <td class="text-right">
                          {{ purchase.wax }} WAX
                          <i class="fa fa-external-link wax-transaction-link" :data-hash="purchase.waxTransaction"></i>
                        </td>
                        <td class="text-right">
                          {{ purchase.banano }} BAN
                          <i class="fa fa-external-link banano-transaction-link" :data-hash="purchase.bananoTransaction"></i>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div> <!-- /.col-md-6 -->
            </div> <!-- /.row -->
          </div> <!-- /.content -->

        </div> <!-- /#menu-container -->

      </div> <!-- /.col-md-8 -->

    </div> <!-- /.row -->
  </div> <!-- /.container-fluid -->

  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 footer">
        <p id="footer-text">

          <a href="https://discord.gg/Wu5ge663mG" target="_blank">Need support?  Join the discord.</a>

        </p>
      </div><!-- /.footer -->
    </div>
  </div> <!-- /.container-fluid -->

  <script src="js/vendor/jquery-1.10.1.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.1.min.js"><\/script>')</script>
  <script src="js/jquery.easing-1.3.js"></script>
  <script src="js/bootstrap.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/vendor/signalr.min.js"></script>
  <script src="js/vendor/vue.min.js"></script>
  <script src="js/vendor/axios.min.js"></script>
  <script src="js/main.js"></script>
  <script src="js/site.js"></script>
  <script src="js/formatting.js"></script>
  <script type="text/javascript">

    jQuery(function ($) {

      $.supersized({

        // Functionality
        slide_interval: 3000, // Length between transitions
        transition: 1, // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
        transition_speed: 700, // Speed of transition

        // Components
        slide_links: 'blank', // Individual links for each slide (Options: false, 'num', 'name', 'blank')
        slides: [ // Slideshow Images
          {
            image: 'images/backgrounds/monkeys-4661232_1920.jpg'
          }, {
            image: 'images/backgrounds/monkeys-4999618_1920.jpg'
          }, {
            image: 'images/backgrounds/long-tailed-macaque-4501435_1920.jpg'
          }
        ]

      });
    });


    // ================
    //    VUE
    // ================

    var rent = new Vue({
      el: '#menu-0',
      data() {
        return {
          state: {}
        }
      }
    });

    var sell = new Vue({
      el: '#menu-1',
      data() {
        return {
          state: {}
        }
      }
    });

    var my = new Vue({
      el: '#menu-3',
      data() {
        return {
          state: {},
          detail: {
            address: {
              full: 'ban_3pru4k1zzm3qqwbr9znnc9kbhd4z6yy6kgtcspwawe6sst953gq9ybmbqy5y',
              start: 'ban_3pru4k1',
              mid: 'zzm3qqwbr9znnc9kbhd4z6yy6kgtcspwawe6sst953gq9yb',
              end: 'mbqy5y'
            },
            link: 'banano:ban_3pru4k1zzm3qqwbr9znnc9kbhd4z6yy6kgtcspwawe6sst953gq9ybmbqy5y?amount=1200000000000000000000000000000',
            cpu: 3,
            net: 1,
            days: 3,
            banano: 12
          }
        }
      }
    });

    var recents = new Vue({
      el: '#menu-4',
      data() {
        return {
          state: {},
          recent: {
            rentals: [],
            purchases: []
          }
        }
      }
    });

    // ================
    //    NOTIFICATIONS
    // ================

    const _connection = new signalR.HubConnectionBuilder()
      .withUrl('/notifications')
      .withAutomaticReconnect()
      .build();

    _connection.start().catch(function (err) {
      return console.error(err.toString());
    });

    _connection.on("AppStateChanged", state => {
      rent.state = state;
      sell.state = state;
      my.state = state;
      explore.state = state;
    });

    _connection.on("RecentsChanged", recent => {
      recents.recent = recent;
    });

  </script>

</body>
</html>
